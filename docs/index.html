<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Predicci√≥n de Nivel de Estr√©s üß†</title>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.20.0"></script>

  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f4f7fa; display: flex; flex-direction: column; align-items: center; padding: 30px; margin: 0; }
    h1 { color: #0078d7; margin-bottom: 15px; text-align: center; }
    .box { background: #fff; border-radius: 14px; padding: 25px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 340px; text-align: center; transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .box:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
    p { font-weight: 500; color: #333; margin: 10px 0 5px; }
    input { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 6px; border: 1px solid #ccc; font-size: 15px; text-align: center; transition: border-color 0.3s; }
    input:focus { border-color: #0078d7; outline: none; }
    button { background: #0078d7; color: white; border: none; padding: 10px; border-radius: 6px; cursor: pointer; font-size: 16px; width: 100%; margin-top: 10px; transition: background 0.3s, transform 0.2s; }
    button:hover { background: #005bb5; transform: scale(1.02); }
    .resultado { margin-top: 20px; font-size: 22px; font-weight: 600; transition: color 0.3s ease, transform 0.3s ease; }
    .bajo { color: #4CAF50; transform: scale(1.1); }   
    .medio { color: #FFC107; transform: scale(1.1); } 
    .alto { color: #F44336; transform: scale(1.1); }   
    footer { margin-top: 25px; color: #777; font-size: 13px; }
  </style>
</head>

<body>
  <h1>Predicci√≥n de Estr√©s (IA) üß†</h1>

  <div class="box">
    <p>Horas de sue√±o:</p>
    <input type="number" id="sueno" placeholder="Ej: 6" min="0" max="12">

    <p>Tazas de caf√©:</p>
    <input type="number" id="cafe" placeholder="Ej: 2" min="0" max="10">

    <p>Minutos de ejercicio:</p>
    <input type="number" id="ejercicio" placeholder="Ej: 30" min="0" max="180">

    <p>Horas frente a pantalla:</p>
    <input type="number" id="pantalla" placeholder="Ej: 8" min="0" max="16">

    <button onclick="predecir()">Predecir</button>
    <div class="resultado" id="resultado">Nivel: ‚Äî</div>
  </div>

  <footer>Desarrollado con ‚ù§Ô∏è y TensorFlow.js</footer>

  <script>
    const etiquetas = ["Bajo üòå", "Medio üòê", "Alto üò°"];
    const clases = ["bajo", "medio", "alto"];
    let model;

    async function predecir() {
      const s = parseFloat(document.getElementById('sueno').value);
      const c = parseFloat(document.getElementById('cafe').value);
      const e = parseFloat(document.getElementById('ejercicio').value);
      const p = parseFloat(document.getElementById('pantalla').value);
      const salida = document.getElementById('resultado');

      if ([s, c, e, p].some(isNaN)) {
        salida.textContent = "‚ö†Ô∏è Por favor completa todos los campos.";
        salida.className = "resultado";
        return;
      }

      if (!model) {
        salida.textContent = "Cargando modelo‚Ä¶ ‚è≥";
        try {
          model = await tf.loadLayersModel('folder/model.json');
          console.log("‚úÖ Modelo cargado correctamente");
        } catch (err) {
          console.error("‚ùå Error cargando el modelo:", err);
          salida.textContent = "‚ùå Error cargando el modelo";
          return;
        }
      }

      try {
        const entrada = tf.tensor2d([[s, c, e, p]]);
        const pred = model.predict(entrada);
        const data = await pred.data();
        const idx = data.indexOf(Math.max(...data));

        salida.textContent = "Nivel de Estr√©s: " + etiquetas[idx];
        salida.className = "resultado " + clases[idx];
      } catch (error) {
        console.error("Error al predecir:", error);
        salida.textContent = "‚ùå Error en la predicci√≥n.";
        salida.className = "resultado";
      }
    }
  </script>
</body>
</html>
